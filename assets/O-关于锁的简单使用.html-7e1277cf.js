import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as u,c as r,d as k,a as n,e as c,w as a,b as s}from"./app-2a2d189a.js";const d={},m=n("h1",{id:"o-关于锁的简单使用",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#o-关于锁的简单使用","aria-hidden":"true"},"#"),s(" O-关于锁的简单使用")],-1),v=n("p",null,"O-关于锁的简单使用",-1),b=n("div",{class:"hint-container info"},[n("p",{class:"hint-container-title"},"说明"),n("ul",null,[n("li",null,"主要是遇到了莫名的 报错之类的；"),n("li",null,"也是基础不牢固；那些构参 移动之类的")])],-1),_={class:"table-of-contents"},h=n("h2",{id:"一、简单介绍",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#一、简单介绍","aria-hidden":"true"},"#"),s(" 一、简单介绍")],-1),y=n("ul",null,[n("li",null,[n("mark",null,"Lock[N]")]),n("li",null,"多线程情况下不免需要进行 锁的使用"),n("li",null,"当我们想要对N个对象进行上锁的时候；"),n("li",null,"可以考虑 设置一个 数组锁，然后 对应到每个对象"),n("li",null,[s("不要忘了在CMake "),n("code",null,"TARGET_LINK_LIBRARIES(test ${Boost_LIBRARIES}) # for using boost options")])],-1),w={class:"hint-container details"},f=n("summary",null,"Click me to view the code!",-1),g=n("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp"},[n("pre",{class:"language-cpp"},[n("code",null,[n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<memory>"),s(),n("span",{class:"token comment"},"// 用于 std::unique_ptr")]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"boost/smart_ptr/detail/spinlock.hpp"')]),s(`
`),n("span",{class:"token keyword"},"typedef"),s(" boost"),n("span",{class:"token double-colon punctuation"},"::"),s("detail"),n("span",{class:"token double-colon punctuation"},"::"),s("spinlock Lock"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"typedef"),s(" std"),n("span",{class:"token double-colon punctuation"},"::"),s("lock_guard"),n("span",{class:"token operator"},"<"),s("Lock"),n("span",{class:"token operator"},">"),s(" LockGuard"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Data"),n("span",{class:"token punctuation"},"{"),s(`
`),n("span",{class:"token keyword"},"private"),n("span",{class:"token operator"},":"),s(`
    std`),n("span",{class:"token double-colon punctuation"},"::"),s("vector"),n("span",{class:"token operator"},"<"),s("Lock"),n("span",{class:"token operator"},">"),s(" lock_"),n("span",{class:"token punctuation"},";"),s(` 
`),n("span",{class:"token keyword"},"public"),n("span",{class:"token operator"},":"),s(`
`),n("span",{class:"token comment"},"/// the operate"),s(`
    `),n("span",{class:"token function"},"GraphData"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"unsigned"),s(),n("span",{class:"token keyword"},"int"),s(" dataSize_"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
		lock_`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"resize"),n("span",{class:"token punctuation"},"("),s("dataSize"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 这样是不行的；因为："),s(`
		`),n("span",{class:"token comment"},"//目前看起来没有直接对 boost::detail::spinlock 对象进行复制或移动的操作。"),s(`
		`),n("span",{class:"token comment"},"//resize就是复制or移动了"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token operator"},"~"),n("span",{class:"token function"},"GraphData"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),L=n("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp"},[n("pre",{class:"language-cpp"},[n("code",null,[n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<memory>"),s(),n("span",{class:"token comment"},"// 用于 std::unique_ptr")]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"boost/smart_ptr/detail/spinlock.hpp"')]),s(`
`),n("span",{class:"token keyword"},"typedef"),s(" boost"),n("span",{class:"token double-colon punctuation"},"::"),s("detail"),n("span",{class:"token double-colon punctuation"},"::"),s("spinlock Lock"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"typedef"),s(" std"),n("span",{class:"token double-colon punctuation"},"::"),s("lock_guard"),n("span",{class:"token operator"},"<"),s("Lock"),n("span",{class:"token operator"},">"),s(" LockGuard"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Data"),n("span",{class:"token punctuation"},"{"),s(`

`),n("span",{class:"token keyword"},"private"),n("span",{class:"token operator"},":"),s(`
    std`),n("span",{class:"token double-colon punctuation"},"::"),s("vector"),n("span",{class:"token operator"},"<"),s("std"),n("span",{class:"token double-colon punctuation"},"::"),s("unique_ptr"),n("span",{class:"token operator"},"<"),s("Lock"),n("span",{class:"token operator"},">>"),s(" lock_"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 使用 unique_ptr 来管理 Lock"),s(`
    
`),n("span",{class:"token keyword"},"public"),n("span",{class:"token operator"},":"),s(`
`),n("span",{class:"token comment"},"/// the operate"),s(`
    `),n("span",{class:"token function"},"GraphData"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"unsigned"),s(),n("span",{class:"token keyword"},"int"),s(" dataSize_"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"unsigned"),s(),n("span",{class:"token keyword"},"int"),s(" K_"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 使用 unique_ptr 来自动管理 Lock 对象的生命周期"),s(`
        `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),s("size_t i "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(" i "),n("span",{class:"token operator"},"<"),s(" dataSize_"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token operator"},"++"),s("i"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            lock_`),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" std"),n("span",{class:"token double-colon punctuation"},"::"),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"make_unique"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),s("Lock"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 创建新的 Lock 实例"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token operator"},"~"),n("span",{class:"token function"},"GraphData"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// unique_ptr 将自动释放其管理的内存"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    
    `),n("span",{class:"token comment"},"//当我们在使用的时候："),s(`
    LockGuard `),n("span",{class:"token function"},"guard"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("lock_"),n("span",{class:"token punctuation"},"["),s("iidx"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),D=n("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp"},[n("pre",{class:"language-cpp"},[n("code",null,[n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<memory>"),s(),n("span",{class:"token comment"},"// 用于 std::unique_ptr")]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"boost/smart_ptr/detail/spinlock.hpp"')]),s(`
`),n("span",{class:"token keyword"},"typedef"),s(" boost"),n("span",{class:"token double-colon punctuation"},"::"),s("detail"),n("span",{class:"token double-colon punctuation"},"::"),s("spinlock Lock"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"typedef"),s(" std"),n("span",{class:"token double-colon punctuation"},"::"),s("lock_guard"),n("span",{class:"token operator"},"<"),s("Lock"),n("span",{class:"token operator"},">"),s(" LockGuard"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"OneData"),n("span",{class:"token punctuation"},"{"),s(`
    Lock lock`),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"int"),s(" data"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Data"),n("span",{class:"token punctuation"},"{"),s(`
     
    `),n("span",{class:"token comment"},"//或者说简单点的话就是仅仅使用一个lock对于每一个"),s(`
`),n("span",{class:"token keyword"},"public"),n("span",{class:"token operator"},":"),s(`
    vector`),n("span",{class:"token operator"},"<"),s("OneData"),n("span",{class:"token operator"},">"),s("  NNGraph_"),n("span",{class:"token punctuation"},";"),s(`
    std`),n("span",{class:"token double-colon punctuation"},"::"),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"vector"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),s("OneData"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),s("dataSz_"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"swap"),n("span",{class:"token punctuation"},"("),s("NNGraph_"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token operator"},"~"),n("span",{class:"token function"},"GraphData"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),G=n("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp"},[n("pre",{class:"language-cpp"},[n("code",null,[n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<memory>"),s(),n("span",{class:"token comment"},"// 用于 std::unique_ptr")]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"boost/smart_ptr/detail/spinlock.hpp"')]),s(`
`),n("span",{class:"token keyword"},"typedef"),s(" boost"),n("span",{class:"token double-colon punctuation"},"::"),s("detail"),n("span",{class:"token double-colon punctuation"},"::"),s("spinlock Lock"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"typedef"),s(" std"),n("span",{class:"token double-colon punctuation"},"::"),s("lock_guard"),n("span",{class:"token operator"},"<"),s("Lock"),n("span",{class:"token operator"},">"),s(" LockGuard"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"lockk"),n("span",{class:"token punctuation"},"{"),s(`
    Lock lock`),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"OneData"),n("span",{class:"token punctuation"},"{"),s(`
    vector`),n("span",{class:"token operator"},"<"),s("lockk"),n("span",{class:"token operator"},">"),s(" Lock_"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"int"),s(" data"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Data"),n("span",{class:"token punctuation"},"{"),s(`
     
    `),n("span",{class:"token comment"},"//或者说简单点的话就是仅仅使用一个lock对于每一个;"),s(`
    `),n("span",{class:"token comment"},"// 这样也比较直接 比 用指针更快好像；"),s(`
`),n("span",{class:"token keyword"},"public"),n("span",{class:"token operator"},":"),s(`
    vector`),n("span",{class:"token operator"},"<"),s("OneData"),n("span",{class:"token operator"},">"),s("  NNGraph_"),n("span",{class:"token punctuation"},";"),s(`
    std`),n("span",{class:"token double-colon punctuation"},"::"),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"vector"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),s("OneData"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),s("dataSz_"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"swap"),n("span",{class:"token punctuation"},"("),s("NNGraph_"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token operator"},"~"),n("span",{class:"token function"},"GraphData"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),N=n("br",null,null,-1);function x(A,O){const l=o("router-link"),i=o("CodeTabs");return u(),r("div",null,[m,v,k(" more "),b,n("nav",_,[n("ul",null,[n("li",null,[c(l,{to:"#一、简单介绍"},{default:a(()=>[s("一、简单介绍")]),_:1})])])]),h,y,n("details",w,[f,c(i,{id:"55",data:[{id:"demo1"},{id:"demo2"},{id:"demo3"},{id:"demo4"}],"tab-id":"shell"},{title0:a(({value:e,isActive:t})=>[s("demo1")]),title1:a(({value:e,isActive:t})=>[s("demo2")]),title2:a(({value:e,isActive:t})=>[s("demo3")]),title3:a(({value:e,isActive:t})=>[s("demo4")]),tab0:a(({value:e,isActive:t})=>[g]),tab1:a(({value:e,isActive:t})=>[L]),tab2:a(({value:e,isActive:t})=>[D]),tab3:a(({value:e,isActive:t})=>[G]),_:1})]),N])}const S=p(d,[["render",x],["__file","O-关于锁的简单使用.html.vue"]]);export{S as default};
